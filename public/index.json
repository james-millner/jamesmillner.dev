[{"content":"New article!\r  Happy Raspberry Pi Day! # I\u0026rsquo;m a day late writing this, but seeing that yesterday was Raspberry Pi day has prompted me to put some words out about my experience with Raspberry Pi\u0026rsquo;s - and a bit of a tutorial on how to set up what I have running currently.\nMy Raspberry Pi Background # I\u0026rsquo;ve always been interested in Raspberry Pi\u0026rsquo;s due to the low barrier to entry, and their compact design. I mean a computer the size of a credit card?! I remember nerdly thinking that this was so cool, and to be honest I still do!\nI got my first Raspberry Pi back in 2018 - the 3 B+ model. At the time I only had the Pi itself with an SD card, and some cabling to hook it up to my router and to power it on. It\u0026rsquo;s a relatively cheap piece of kit to acquire in the UK. Nowadays, you can get a starter kit for around ¬£50, which will give you the essentials to get a machine up and running.\nThey can be used for all sorts of wacky and wonderful ideas but at their core they are a tool to:\n Learn programming languages Understanding operating systems and system level operations IoT style development Home automation Clusters and edge computing and more!  I was introduced to the University of Huddersfield demo Raspberry Pi cluster which really piqued my interest in them originally.\n  A 16 node Raspberry Pi cluster at the University of Huddersfield!  Unfortunately I wasn\u0026rsquo;t able to find any further information online from when this project existed at the University, but since there has been some cool research published from the University of Huddersfield using them. I\u0026rsquo;ll link them here for anyone interested in the studies:\n An Asus-xtion-probased Indoor MAPPING Using a Raspberry Pi with Turtlebot Robot Turtlebot Robot - Dr Voileta Holmes, Dr Hamza Aagela \u0026amp; Maha Al-Nesf Implementing a Lightweight Cloud-Based Process Monitoring Solution for Smart Agriculture - Daniel Clarke, Dr Hussain Al-Aqrabi, Prof Graham Hill, Dr Pritesh Mistry, Philip Lane  However, I must admit, when I got my Raspberry Pi 3 B+ I didn\u0026rsquo;t do too much with it. I loaded up Raspbian (a Debian based linux distro specifically designed for Raspberry Pis) and tinkered with it. After that point it sat as a bit of a paper weight.\nDue to the ease of use, I used to flash it back to normal time and time again - to repeatedly set it up. But I saw lots of projects setting up retro gaming consoles, pi robots, hue lighting automation. I never got that far, but never forgot about the trusty Pi!\nThese devices are a great learning tool at any stage of your development! It opens up loads of possibilities to learn all about computing in an accessible way. There\u0026rsquo;s a shed load of support available online in the form of the Raspberry Pi Foundation website, the Raspberry Pi Forums, and generally all over the internet.\nMy Own Raspberry Pi Cluster # At Sky Betting \u0026amp; Gaming, in the technology space we are a big Kubernetes house. Lots of our infrastructure runs on Kubernetes, and we\u0026rsquo;ve got lots of automation around it to enable all our squads to utilize it.\nNow Kubernetes isn\u0026rsquo;t particularly lightweight, or so I thought before I discovered K3s\n Lightweight Kubernetes. Easy to install, half the memory, all in a binary of less than 100 MB.\n Sourced from: https://rancher.com/docs/k3s/latest/en/.\nNow I was asking a bit much of my 3 B+ to run this on its own. So I invested in two Raspberry Pi 4 (4GB) models, one to run as the controller node, and a subsequent worker. This gave me a compute pool of:\n 1x Raspberry Pi 3 B+ (1GB) 2x Raspberry Pi 4 (4GB)  What do I do to set this up? # To get up and running the first step is to flash a fresh operating system to the SD cards. In my case, an installation of Raspbian on all the SD cards I planned to insert into the Raspberry Pis. Raspbian is what this post follows, but if you want tips on other OS\u0026rsquo;s please reach out!\nHistorically you could download an ISO of your choosing, then use a disk imaging tool to flash that OS to the card. That\u0026rsquo;s still possible today of course, but there\u0026rsquo;s now a dedicated tool provided by the Raspberry Pi Foundation to help you on your way! This tool will format and flash your OS images for you, it\u0026rsquo;ll also allow you to use a custom ISO too. It\u0026rsquo;s really neat üëç, and I\u0026rsquo;d recommend this route.\nOnce I\u0026rsquo;d flashed all the images it was almost time to assemble them and power them on. I wanted to operate them all headlessly, which the section below covers.\nHeadless Pi? # If you want to run the Pi\u0026rsquo;s heedlessly. Which essentially is running the Pi\u0026rsquo;s with out a GUI. I wanted to SSH onto them and configure them all via a terminal. To do this, you\u0026rsquo;ll need to add an empty file named ssh to the root of your volume.\nIt\u0026rsquo;s as easy as changing directory into that new volume using the terminal of your choice and running:\n touch ssh on MacOS / Linux. New-Item ssh -type file on Windows Powershell  This will tell the Pi on boot to enable SSH. Safely eject your SD card and begin assembling!\n  My 3 node Raspberry Pi cluster!  Once you power the Pi on. You\u0026rsquo;ll be able to SSH to it over your network by running:\n\rssh pi@\u0026lt;your-raspberry-pi-ip-here\u0026gt;\r\nIt\u0026rsquo;ll ask you for a password, which, if you selected Raspbian the default will be raspberry. Then afterwords, if you\u0026rsquo;ve been successful you\u0026rsquo;ll get the following response:\n‚ûú James Millner $ pi-one\rLinux raspberry 5.10.92-v8+ #1514 SMP PREEMPT Mon Jan 17 17:39:38 GMT 2022 aarch64\rThe programs included with the Debian GNU/Linux system are free software;\rthe exact distribution terms for each program are described in the\rindividual files in /usr/share/doc/*/copyright.\rDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\rpermitted by applicable law.\rLast login: Mon Mar 14 23:29:54 2022 from 192.168.1.29\rWi-Fi is currently blocked by rfkill.\rUse raspi-config to set the country before use.\rpi@raspberry:~ $ Then the world is your oyster! You\u0026rsquo;ve successfully set up a Raspberry Pi! üôå\nBefore I continue here - one step I like to do after setting these up is instantly rename the hostname of the pi. To do this, run:\nsudo raspi-config (On Raspbian only)\nThis will give you the option to change the hostname. I opted to change them to be pi-one, pi-two and pi-three.\nConfiguring a K3s cluster # Now this is where it gets good. It\u0026rsquo;s only a handful more steps, and you\u0026rsquo;ll have a lightweight version of Kubernetes to play around with. All credit here goes to the documentation at Rancher, its brilliant.\nFirstly select the node which you would like to be the controller. Bear in mind this will still operate as a node, but it\u0026rsquo;ll be the main controlling node.\nOn that node, run:\ncurl -sfL https://get.k3s.io | sh - This will go off and install K3s on that host. To confirm K3s is set up correctly you can run:\nsudo systemctl status k3s.service Which if successful, should return:\n‚óè k3s.service - Lightweight Kubernetes\rLoaded: loaded (/etc/systemd/system/k3s.service; enabled; vendor preset: enabled)\rActive: active (running) since Mon 2022-03-14 23:26:50 GMT; 23min ago\rDocs: https://k3s.io This response is trimmed down from the full systemctl response. The main attribute we\u0026rsquo;re interested in here is the active flag\nKube Config # Now you have a node! Now k3s will have configured a config file to interact with the cluster, make a copy of this. You can find it by running:\nsudo cat /etc/rancher/k3s/k3s.yaml Now if you want to test your k3s cluster remotely then you\u0026rsquo;ll need kubectl configured. If you don\u0026rsquo;t want to install kubectl, it\u0026rsquo;s not required, but it can make life easier.\nWithout Kubectl - Locally # K3s installs an instance of kubectl on your nodes. If you hop onto your controller node, and run the following:\npi@pi-one:~ $ sudo k3s kubectl get nodes\rNAME STATUS ROLES AGE VERSION\rpi-one Ready control-plane,master 31m v1.22.7+k3s1 You should see this lovely output to say that its setup correctly!\nWith Kubectl - Remotely # If you take the contents of sudo cat /etc/rancher/k3s/k3s.yaml and set them up on your own host under ~/.kube/config you\u0026rsquo;ll then be able to use kubectl remotely.\nOne thing to note, the kube/config file by default will have the cluster server set to localhost. To access this remotely, you\u0026rsquo;ll need to change this to your local IP of that node: 192.168.*.*:6443. Look in that config file and find the location clusters -\u0026gt; cluster -\u0026gt; server and make the change there.\nThis guide presumes you already have kubectl installed, if you don\u0026rsquo;t head here to find out how to install it.\nUpon running kubectl get nodes you should see something like this:\n‚ûú James Millner kubectl get nodes\rNAME STATUS ROLES AGE VERSION\rpi-one Ready control-plane,master 21m v1.22.7+k3s1 That\u0026rsquo;s your first node installed! Now onto the other nodes. This is where the process slightly differs and this because you\u0026rsquo;ve just configured your controller node. We\u0026rsquo;ll now need to configure some worker nodes.\nTo do that, head back onto your controller and run the following command:\nsudo cat /var/lib/rancher/k3s/server/node-token This will return you a token, keep this safe. You\u0026rsquo;ll need it next to configure the workers.\nNow the next command takes that token and uses it to allow that worker to join the cluster. Keep it safe. Prepare the following command that contains:\n Cluster Access Token Controller Local IP  curl -sfL https://get.k3s.io | K3S_URL=https://\u0026lt;controller-node-ip-here\u0026gt;:6443 K3S_TOKEN=\u0026lt;my-super-secret-k3s-token\u0026gt; sh - Once you have the command, run that on each host that you want to join the cluster. Now once that\u0026rsquo;s run, just as before - make sure that systemctl reports the service as healthy by running sudo systemctl status k3s.service on each new host.\nOnce you\u0026rsquo;re happy run the kubectl get nodes command, and you should see a happy set of nodes ready for some work!\nWithout Kubectl - Locally\npi@pi-one:~ $ sudo k3s kubectl get nodes\rNAME STATUS ROLES AGE VERSION\rpi-two Ready \u0026lt;none\u0026gt; 27m v1.22.7+k3s1\rpi-one Ready control-plane,master 31m v1.22.7+k3s1\rpi-three Ready \u0026lt;none\u0026gt; 27m v1.22.7+k3s1 With Kubectl - Remotely\n‚ûú James Millner kubectl get nodes\rNAME STATUS ROLES AGE VERSION\rpi-two Ready \u0026lt;none\u0026gt; 16m v1.22.7+k3s1\rpi-three Ready \u0026lt;none\u0026gt; 16m v1.22.7+k3s1\rpi-one Ready control-plane,master 21m v1.22.7+k3s1 This covers the basics of getting a K3s cluster up and running.\nNow you can go ahead and run workloads on there, and K3s will balance work for you and away you go! Some takeaway points and notes:\n The Raspberry Pi\u0026rsquo;s are all ARM based architecture. So anything you run on there will need to be ARM compatible.  So look for ways to convert your AMD64 apps to ARM, and test them out on here! GoLang has some great tooling to build ARM apps, package them build, build a docker container and away you go! Plenty of ARM based docker base images out there to make your applications compliant.   K3s is fully CNCF certified and it conforms with the standard kubernetes API. It makes it the perfect demo cluster to get started with Kubernetes. If you can deploy something on K3s, you can lift and shift your YAML files and apply them to a larger scale cluster!  Monitoring \u0026amp; Observability of your Cluster. # K3s has the support for the Kubernetes Dashboard but I\u0026rsquo;ll be honest I didn\u0026rsquo;t set that up as part of this demo.\nWe heavily use Prometheus and Grafana at Sky Betting \u0026amp; Gaming, so I was quite keen to replicate that. Now to save this post from becoming too long, I want to link out to Carlos Eduardo\u0026rsquo;s Cluster Monitoring Repo This has a wealth of instructions for setting up Prometheus, Grafana, Alertmanager and more! It also has support for K3s, but plenty of other Kubernetes setups.\nDo check it out, as it can give you some great monitoring tooling for you cluster through prom-operator. It also gives you a solid interface so that you can scrape metrics from your own deployments. Here\u0026rsquo;s some examples of the dashboards you get for free:\n  Cluster Use Graph    Node exporter metrics    Further resource monitoring  Overall I hope this blog entry has been useful to read! It\u0026rsquo;s a first really as far as my own blog posts go, and I enjoyed writing it.\nIf you have any questions, or want to know more head over to twitter and reach me there. All the links are below!\nThanks for taking the time to read this. Oh, and Happy Pi Day / Week üç∞\n","date":"March 14, 2022","permalink":"/blog/2022/03/14/raspberry-pi-day/","section":"Posts","summary":"New article!\r  Happy Raspberry Pi Day! # I\u0026rsquo;m a day late writing this, but seeing that yesterday was Raspberry Pi day has prompted me to put some words out about my experience with Raspberry Pi\u0026rsquo;s - and a bit of a tutorial on how to set up what I have running currently.","title":"Raspberry Pi Day!"},{"content":"Hello üëã # Well this is new! Hello World!\nI\u0026rsquo;ve created this small site to organise my online space, share a bit more about the projects and work that I\u0026rsquo;m interested in, and to share some ramblings. This site is set up with Hugo and using the Congo theme, and boy is it neat! It\u0026rsquo;s hosted and managed by Netlify, making it easy to deploy updates and posts here! Woo!\nThis isn\u0026rsquo;t too unusual for me, I have had previous static sites before to try to host my own personal website. Albeit I\u0026rsquo;m not really familiar with blogging, other than the occasional short form tweet. But if I\u0026rsquo;m being honest, I\u0026rsquo;ve never been able to set something up that I\u0026rsquo;ve been 100% happy with. While this space is relatively new, it\u0026rsquo;s definitely a start in the right direction, and so far Hugo / Congo has made it very simple to get something up and running that I quite like the look of. Especially with it looking like it\u0026rsquo;s straight forward to structure pages and blog entries.\nSo, I wanted to keep this first post as a bit of an introduction-y sort of post and with that in mind I\u0026rsquo;d like to set up this space so that it has:\n A list of projects I\u0026rsquo;ve worked on / contributed too Blog style posts around tech and things I find interesting. As mentioned in About maybe some cycling related waffle? üëÄ Up-to-date links to reach me, socials and such!   Note that all opinions expressed on this site are solely my own and may not represent the views or opinions of my employers past and present.\n ","date":"March 12, 2022","permalink":"/blog/2022/03/12/a-whole-new-hello-world-earth_africa/","section":"Posts","summary":"Hello üëã # Well this is new! Hello World!\nI\u0026rsquo;ve created this small site to organise my online space, share a bit more about the projects and work that I\u0026rsquo;m interested in, and to share some ramblings.","title":"A whole new Hello World! üåç"},{"content":"Wasn\u0026rsquo;t sure whether to bundle this in as a project, but thought why not! It\u0026rsquo;s a piece of code I\u0026rsquo;m quite proud of!\nIt was another LeedsCodeDojo meetup, hosted at Sky Betting \u0026amp; Gaming. The challenge for the evening:\n Build a single player blackjack game that runs in a terminal.\n As a result my entry is available here. I opted to attempt it in Kotlin using CliKT. It was a fun challenge!\n  The House doesn\u0026rsquo;t always win!!!  Writing this blog post actually reminded me to update part of the Makefile! Previously the makefile used my installed version of maven. So I\u0026rsquo;ve now updated it to use the wrapper I had originally intended to use.\nRequirements to run! # Clone the repo and follow:\n Easiest route:  Linux / Macos with a valid version of Java installed \u0026gt;= 8 run make and play a game of blackjack!   Windows / Not WSL - and without going down the NMakeFile route  Ensure you have Java installed run ./mvnw clean package run java -jar target/blackjack-app-1.0-jar-with-dependencies.jar    ","date":"November 16, 2020","permalink":"/projects/2-blackjackcli/","section":"Projects","summary":"Wasn\u0026rsquo;t sure whether to bundle this in as a project, but thought why not!","title":"LeedsCodeDojo - Coding Kata - Blackjack! ‚ù§Ô∏è ‚ô†Ô∏è ‚ô¶Ô∏è ‚ô£Ô∏è"},{"content":"2020 -\u0026gt; 2022\nDartsNow was a passion project between myself good friend from the University of Huddersfield. It came about due to our historic interest in darts which grew out of our university accommodation. Throughout the pandemic period we had no way to get together and play, so as a result DartsNow was born!\nDartsNow offered users a platform to sign up, play a standard format of darts. Each user could setup a game with a custom amount of legs they wanted to play, and to a total of 701, 501, 301, 101. It processed each set of darts thrown, calculated statistics from each game, while also offering peer to peer video via WebRTC to communicate with friends as you played.\nFeatures #  User registration Live Darts Scoring Peer to Peer video in game  Tech Bits #  Spring Boot Backend Thymeleaf Templated Front End Websocket implementation for live scoring WebRTC integration Metrics using Micrometer, stored and visualised using Prometheus \u0026amp; Grafana.  The project has ceased to exist at the moment. But you can find out lots of information from our public twitter page about what we got up to.\nCalling all online dart players... The DartsNow alpha is live and we want you to get involved. So grab your phone, a few friends and show us your scores, checkouts and miscalculations! Link in bio. üòéüéØüèÜ #dartsnow #darts #dartsfordays #dartslife #dartslive #onlinedarts pic.twitter.com/c83l2L2f4w\n\u0026mdash; DartsNow (@PlayDartsNow) July 7, 2020  ","date":"February 5, 2020","permalink":"/projects/1-dartsnow/","section":"Projects","summary":"2020 -\u0026gt; 2022\nDartsNow was a passion project between myself good friend from the University of Huddersfield.","title":"DartsNow üéØ - Online Darts Platform, Log In, Check Out."},{"content":"Wasn\u0026rsquo;t sure whether to bundle this in as a project, but thought why not! It\u0026rsquo;s another piece of Kotlin code, just for a bit of fun.\nIt was the first LeedsCodeDojo in quite a long time, hosted at Sky Betting \u0026amp; Gaming.\nThe goals of the evening were simple:\nHave fun\rPair Program\rLearn something new!\rCreate some logic that simulated the game Mastermind\r As a result my entry is available here. I opted to attempt it in Kotlin using Micronauts CLI functionality. This was good fun, but to be honest I wasn\u0026rsquo;t very familiar with Mastermind the game.\nWriting this blog post actually reminded me to update part of the Makefile again!\nRequirements to run! # Clone the repo and follow:\n Easiest route:  Linux / Macos with a valid version of Java installed \u0026gt;= 9 run make to build run make run to play!   Windows / Not WSL - and without going down the NMakeFile route  Ensure you have Java installed run ./gradlew clean build run java -jar build/libs/micronaut-mastermind-0.1.jar    ","date":"May 7, 2019","permalink":"/projects/3-mastermind/","section":"Projects","summary":"Wasn\u0026rsquo;t sure whether to bundle this in as a project, but thought why not!","title":"LeedsCodeDojo - Coding Kata - Mastermind üî¥ ‚ö™ üîµ ‚ö´"},{"content":"Hi üëã # My name is James Millner, and I\u0026rsquo;m currently living in Huddersfield, West Yorkshire, UK but have always lived in Yorkshire (insert yorkshire chant).\nI\u0026rsquo;m a motivated Software Developer and enjoy tinkering within the Software Engineering space as often as I can. I love cycling, after taking up the sport in 2018 it\u0026rsquo;s thoroughly taken over my spare time. It\u0026rsquo;s also given me a huge appreciation for West Yorkshire, although it is very hilly! ‚õ∞Ô∏è Since 2018 I\u0026rsquo;ve clocked over 10,000KM in distance, and counting!\n  Some lovely Huddersfield hills, and the trusty stead!  Finally, I also suffer from a serious contagious love for Dad Jokes and Puns. If I can slip them into a morning stand-up - I will.\n I have an async joke.\nI promise it will be good.\n Fun Facts #  Unfortunately not the legendary Liverpudlian footballer James Milner I was a Scout for around 6 years and was lucky enough to attend the 22nd World Scout Jamboree üá∏üá™ üåç  As a result I own the same coat as the King of Sweden! Although he might not have kept it for as long as I have   Co-Founder of Leeds Kotlin User Group ü¶â Co-Founder of DartsNow, an Online Darts Platform üéØ  Favorite Topics # Currently, I am very interested in Kotlin, Spring Boot, Kafka and Software Engineering in general.\nI\u0026rsquo;m also very keen in the world of DevOps and Containerization. Fascinated by SoC computing and successfully operated a K3s.io raspberry pi cluster, with monitoring support via Prometheus Operator - By Carlos Eduardo - Highly recommend checking out this repo if you intend to do the same.\nExperience # I\u0026rsquo;m currently working as a Senior Software Engineer at Sky Betting \u0026amp; Gaming, based in Leeds.\nRather than duplicate my experience on here, my full professional experience can be found over on LinkedIn\nSkills # A lot of my experience is predominantly around the backend JVM space, in Java \u0026amp; Kotlin. Below though is a list of tools and technologies that I have experience with:\nProgramming / Scripting Languages # Kotlin ‚Ä¢ Java ‚Ä¢ JavaScript ‚Ä¢ Typescript ‚Ä¢ React ‚Ä¢ GoLang ‚Ä¢ Bash Scripting\nFrameworks # Spring Boot ‚Ä¢ Micronaut\nOperating Systems # MacOS ‚Ä¢ Ubuntu ‚Ä¢ Debian ‚Ä¢ Windows, especially WSL\nCloud Computing and Automation # AWS ‚Ä¢ GCloud ‚Ä¢ Digital Ocean ‚Ä¢ Terraform ‚Ä¢ Cloudformation ‚Ä¢ AWS CDK ‚Ä¢ Chef ‚Ä¢ Ansible\nEvent Driven Tools # Kafka ‚Ä¢ RabbitMQ ‚Ä¢ ActiveMQ ‚Ä¢ SQS ‚Ä¢ SNS\nMonitoring and Observability # Prometheus ‚Ä¢ Grafana\nDatabase Technologies # MySQL ‚Ä¢ Postgres ‚Ä¢ MongoDB ‚Ä¢ Cassandra\nOther Tools # Kubernetes ‚Ä¢ Docker ‚Ä¢ Git ‚Ä¢ Makefiles ‚Ä¢ Intellij IDEA ‚Ä¢ VSCode ‚Ä¢ Atom\n","date":"January 1, 1","permalink":"/about/","section":"James Millner","summary":"Hi üëã # My name is James Millner, and I\u0026rsquo;m currently living in Huddersfield, West Yorkshire, UK but have always lived in Yorkshire (insert yorkshire chant).","title":"About"}]